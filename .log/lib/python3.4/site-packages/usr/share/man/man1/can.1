." Text automatically generated by txt2man-1.4.7
.TH can 1 "June 21, 2009" "can 2.0" ""
.SH NAME
\fBcan \fP- create/list/extract backup files
\fB
.SH SYNOPSIS
.nf
.fam C
\fBcan\fP \fB-c\fP [\fB-v\fP] [\fB-z\fP|\fB-j\fP] [\fB-e\fP \fIPATTERN\fP] [\fB-X\fP \fIFILE\fP] \fIPATTERN\fP [\fIPATTERN\fP \.\.\.]
\fBcan\fP \fB-x\fP [\fB-v\fP] \fB-f\fP \fIFILE\fP [\fB-e\fP \fIPATTERN\fP] [\fB-X\fP \fIFILE\fP] [\fIPATTERN\fP \.\.\.]
\fBcan\fP \fB-t\fP \fB-f\fP \fIFILE\fP [\fB-e\fP \fIPATTERN\fP] [\fB-X\fP \fIFILE\fP] [\fIPATTERN\fP \.\.\.]
.fam T
.fi
.SH DESCRIPTION
\fBcan\fP(1) is a utility to create and manage incremental snapshots of
parts of the filesystem for backup purposes. It is very similar to
the \fBtar\fP(1) program in terms of command line options and handling.
The philosophy of \fBcan\fP(1) is that creating a snapshot should be
cheap in terms of speed and disk space.
.SH FILE FORMAT
\fBcan\fP(1) stores each backup snapshot in an individual archive.
To save disk space each snapshot stores only the changes that were
made to the filesystem since the previous run. To restore files or
parts of a filesystem it is therefore necessary to keep all
snapshot files of a collection.
.SH EXAMPLE
Suppose you want to backup the directories `documents' and
`projects' from your home directory to a central backup directory
in /var:
.PP
.nf
.fam C
    can -c -v -z -f /var/backups/home-dir -C /home/user documents projects

.fam T
.fi
This command will create a snapshot file in a subdirectory in
/var/backups. The current date and time will be encoded in the
filename. So, if you ran the command above on May 24th 2005 at
15:57, this will be what it looks like:
.PP
.nf
.fam C
    /var/backups/home-dir-20050524-1557

.fam T
.fi
If you changed some files in `documents' or `projects` and issue
the same command an hour later the listing will look like this:
.PP
.nf
.fam C
    /var/backups/home-dir-20050524-1557
    /var/backups/home-dir-20050524-1657

.fam T
.fi
The second snapshot is much smaller than the first one, because it
only stores the changes.
.PP
The next day you notice that you accidentally deleted your `foo'
project directory and want to restore it from the backup:
.PP
.nf
.fam C
    can -t -v -f /var/backups/home-dir-20050524-1657 projects/foo

.fam T
.fi
This command will list all files from the backup you made on May
24th at 16:57 below the `projects/foo' directory. To extract these
files to the current working directory you simply replace the `\fB-t\fP'
option with `\fB-x\fP'.
.SH ACTION OPTIONS
.TP
.B
\fB-h\fP, \fB--help\fP
Show a help message.
.TP
.B
\fB-c\fP, \fB--create\fP
Create a new backup snapshot.
.TP
.B
\fB-x\fP, \fB--extract\fP
Extract files from an existing backup snapshot.
.TP
.B
\fB-t\fP, \fB--list\fP
List files from an existing backup snapshot.
.TP
.B
\fB--test\fP
Test the integrity of a backup snapshot.
.TP
.B
\fB--version\fP
Show version and license information and exit.
.SH COMMON OPTIONS
.TP
.B
\fB-v\fP, \fB--verbose\fP
Produce informative runtime output. May
be specified multiple times to increase
verbosity.
.TP
.B
\fB-f\fP, \fB--file\fP SOURCE
Create a backup snapshot with name SOURCE
(a timestamp is appended automatically)
or extract/list files from an existing
snapshot named SOURCE.
.TP
.B
\fB-C\fP, \fB--directory\fP DIR
Change to DIR before adding or extracting
files.
.TP
.B
\fB-T\fP, \fB--files-from\fP \fIFILE\fP
Read filenames one per line from \fIFILE\fP
instead from the filesystem, "-" means
standard input.
.TP
.B
\fB-e\fP, \fB--exclude\fP PAT
Exclude shell pattern PAT from being
added, extracted or listed.
.TP
.B
\fB-X\fP, \fB--exclude-from\fP \fIFILE\fP
Read exclude patterns from \fIFILE\fP, one per
line.
.TP
.B
\fB--exclude-tag\fP \fIFILE\fP
Exclude contents of directories containing
\fIFILE\fP, except for \fIFILE\fP itself.
.TP
.B
\fB-M\fP, \fB--max-size\fP SIZE
Maximum SIZE in megabytes for files to
add to a snapshot.
.TP
.B
\fB-l\fP, \fB--one-file-system\fP
Do not descend into mounted file systems.
.TP
.B
\fB-z\fP, \fB--gzip\fP
Compress compressable files in the
snapshot with gzip.
.TP
.B
\fB-j\fP, \fB--bzip2\fP
Compress compressable files in the
snapshot with bzip2.
.TP
.B
\fB-Z\fP, \fB--gzip-all\fP
Compress the complete backup snapshot
with gzip.
.TP
.B
\fB-J\fP, \fB--bzip2-all\fP
Compress the complete backup snapshot
with bzip2.
.TP
.B
\fB-K\fP, \fB--keyfile\fP \fIFILE\fP
Encrypt the entire snapshot using the
blowfish algorithm and keyfile \fIFILE\fP.
.TP
.B
\fB--new\fP
List only new or changed files in a
snapshot with \fB-t\fP/\fB--list\fP.
.SH COMPRESSION
The data files are not compressed by default. It is recommended to
use compression which greatly decreases the size of the snapshot
and will save diskspace. \fBcan\fP(1) supports two different compression
algorithms (gzip and bzip2) and two different compression modes.
.PP
In the first mode each file is compressed individually. The
advantages are fast random access which results in fast creating
and extracting and the possibility to store files that are already
compressed (e.g. archives, multimedia files) without compressing
them once again. The file `/etc/\fBcan\fP/compressed.list' contains a
collection of patterns to identify these files.
.PP
In the second mode the complete snapshot file is compressed which
results in much better compression ratio, but slows down creating
and extracting.
.SH ENCRYPTION
\fBcan\fP(1) supports snapshot encryption. The blowfish algorithm is the
only one supported at the moment and you need the pycrypto package
from http://pycrypto.sourceforge.net/.
.PP
To enable encryption use the \fB-K\fP/\fB--keyfile\fP option with a file that
contains a passphrase. The keyfile must be available for every
action performed on the snapshot (creating new ones, listing,
extracting).
.SH CACHE EXCLUSION
The \fB--exclude-tag\fP option allows to exclude particular directories
from a snapshot. This feature is modelled after the solution
presented at http://www.brynosaurus.com/cachedir/. Use whatever
name you like for the \fB--exclude-tag\fP option, it is not limited to
CACHEDIR.TAG. However, CACHEDIR.TAG files are checked for a valid
signature.
.SH FILES
/etc/\fBcan\fP/compressed.list
.SH SEE ALSO
\fBtar\fP(1)
.SH AUTHOR
Lars Gustaebel <lars@gustaebel.de>
